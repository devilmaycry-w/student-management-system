name: Run Java Program

on: 
  push:
    branches:
      - main  # Runs the script whenever you push to 'main' branch
  workflow_dispatch:  # Allows manual trigger from Actions tab

jobs:
  run-java:
    runs-on: ubuntu-latest  # Uses GitHub's Linux server

    steps:
      - name: 📥 Checkout Repository
        uses: actions/checkout@v3  # Fetches your code

      - name: 🔧 Set up JDK 17
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'temurin'  # You can use another JDK if needed

      - name: 🔗 Download MySQL Connector JAR
        run: wget -O mysql-connector-java.jar https://repo1.maven.org/maven2/mysql/mysql-connector-j/8.3.0/mysql-connector-j-8.3.0.jar

      - name: 🚀 Compile Java Files
        run: javac -cp ".:mysql-connector-java.jar" src/*.java

      - name: ▶️ Run Student Management System
        run: java -cp ".:mysql-connector-java.jar" src.StudentManagement
